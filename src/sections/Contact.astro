---
import ContactItem from "@components/ContactItem.astro";
import Input from "@components/ui/Input.astro";
import SectionLayout from "@layouts/SectionLayout.astro";
---

<SectionLayout
  header={{
    tag: "Contáctanos",
    title: "¿Tienes alguna duda o consulta?",
    description: "Escríbenos y te responderemos a la brevedad.",
    dark: true,
  }}
  id="contact"
  class="bg-primary text-white py-20"
>
  <div class={"grid md:grid-cols-2 gap-12"}>
    <div class="space-y-8">
      <ContactItem icon="phone" title="Teléfono" value="983113550" />
      <ContactItem icon="mail" title="Email" value="info@heingenieria.com" />
      <ContactItem
        icon="map-pin"
        title="Dirección"
        value="JR. SAN IGNACIO NRO. 523 - SMP"
      />
    </div>

    <form class="space-y-6 bg-[#1D2D50] p-8 rounded-lg shadow-lg">
      <Input id="subject" type="text" name="subject" id="subject" placeholder="Asunto" />
      <Input id="email"  type="text" name="email" id="email" placeholder="Tu Email" />
      <textarea id
        name="message"
        id="message"
        rows="5"
        placeholder="Tu Mensaje"
        class="w-full p-4 rounded-lg bg-[#0A2239] border border-gray-600
           focus:border-[#F4A261] focus:ring-2 focus:ring-[#F4A261]
           transition-all duration-200 text-white"
      ></textarea>
      <button
        type="submit"
        class="bg-tertiary w-full flex justify-center cursor-pointer items-center gap-x-2 hover:bg-blue-700 text-white px-8 py-3 rounded-md font-semibold transition transform hover:scale-105 duration-200"
      >
        <i data-lucide="mail"></i>
        <span>Enviar Mensaje</span>
      </button>
    </form>
  </div>
</SectionLayout>

<script>
  import "native-toast/dist/native-toast.css";
  // @ts-ignore
  import nativeToast from 'native-toast';

  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;


  const form = document.querySelector("form") as HTMLFormElement;
  form.addEventListener("submit", (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());
    if (Object.values(data).some((value) => !value)) {
      nativeToast({
        message: "Por favor, completa todos los campos.",
        position: "north-east",
        timeout: 3000,
        type: "error",
      });
      return;
    }

    if (!emailRegex.test(data.email as string)) {
      nativeToast({
        message: "Por favor, ingresa un email válido.",
        position: "north-east",
        timeout: 3000,
        type: "error",
      });
      return;
    }

    nativeToast({
      message: "Mensaje enviado correctamente.",
      position: "north-east",
      timeout: 3000,
      type: "success",
    });
  });
</script>
